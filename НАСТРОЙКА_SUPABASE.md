# üîß –ü–û–õ–ù–ê–Ø –ù–ê–°–¢–†–û–ô–ö–ê SUPABASE - –ü–û–®–ê–ì–û–í–ê–Ø –ò–ù–°–¢–†–£–ö–¶–ò–Ø

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞
–û—à–∏–±–∫–∞ "Tenant or user not found" –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –Ω—É–∂–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å Supabase.

---

## ‚úÖ –®–ê–ì 1: –°–æ–∑–¥–∞–π—Ç–µ —Ç–∞–±–ª–∏—Ü—É –≤ Supabase

### –í–∞—Ä–∏–∞–Ω—Ç –ê: –ß–µ—Ä–µ–∑ SQL Editor (–ë–´–°–¢–†–ï–ï)

1. –û—Ç–∫—Ä–æ–π—Ç–µ **Supabase Dashboard** ‚Üí –≤–∞—à –ø—Ä–æ–µ–∫—Ç
2. –°–ª–µ–≤–∞ –Ω–∞–π–¥–∏—Ç–µ **SQL Editor** (–∏–∫–æ–Ω–∫–∞ —Å `</>`)
3. –ù–∞–∂–º–∏—Ç–µ **"New query"**
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –≤—Å—Ç–∞–≤—å—Ç–µ —ç—Ç–æ—Ç SQL –∫–æ–¥:

```sql
CREATE TABLE IF NOT EXISTS responses (
    id BIGSERIAL PRIMARY KEY,
    name TEXT NOT NULL,
    companion TEXT,
    attendance TEXT,
    bus_option TEXT,
    drinks TEXT,
    created_at TIMESTAMPTZ DEFAULT NOW()
);
```

5. –ù–∞–∂–º–∏—Ç–µ **"Run"** –∏–ª–∏ `Ctrl+Enter`
6. –î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ "Success. No rows returned"

### –í–∞—Ä–∏–∞–Ω—Ç –ë: –ß–µ—Ä–µ–∑ Table Editor (–í–ò–ó–£–ê–õ–¨–ù–û)

1. –í Supabase Dashboard –Ω–∞–∂–º–∏—Ç–µ **"Table Editor"** (—Å–ª–µ–≤–∞)
2. –ù–∞–∂–º–∏—Ç–µ **"New table"**
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ:
   - **Name:** `responses`
   - **Description:** "–û—Ç–≤–µ—Ç—ã –≥–æ—Å—Ç–µ–π –Ω–∞ —Å–≤–∞–¥—å–±—É"
4. –ù–∞–∂–º–∏—Ç–µ **"Save"**

**–ó–∞—Ç–µ–º –¥–æ–±–∞–≤—å—Ç–µ –∫–æ–ª–æ–Ω–∫–∏:**

| Column Name | Type | Nullable | Default Value |
|-------------|------|----------|---------------|
| `id` | `int8` (bigint) | ‚ùå No | (auto) - Primary Key |
| `name` | `text` | ‚ùå No | - |
| `companion` | `text` | ‚úÖ Yes | - |
| `attendance` | `text` | ‚úÖ Yes | - |
| `bus_option` | `text` | ‚úÖ Yes | - |
| `drinks` | `text` | ‚úÖ Yes | - |
| `created_at` | `timestamptz` | ‚úÖ Yes | `now()` |

**–ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–ª–æ–Ω–∫–∏:**
1. –í —Ç–∞–±–ª–∏—Ü–µ `responses` –Ω–∞–∂–º–∏—Ç–µ **"Add column"**
2. –î–ª—è –∫–∞–∂–¥–æ–π –∫–æ–ª–æ–Ω–∫–∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª—è –∏ –Ω–∞–∂–º–∏—Ç–µ **"Save"**
3. –î–ª—è `created_at` –≤ –ø–æ–ª–µ "Default Value" –≤–≤–µ–¥–∏—Ç–µ: `now()`

---

## ‚úÖ –®–ê–ì 2: –û—Ç–∫–ª—é—á–∏—Ç–µ Row Level Security (RLS) –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

1. –í **Table Editor** –≤—ã–±–µ—Ä–∏—Ç–µ —Ç–∞–±–ª–∏—Ü—É `responses`
2. –ù–∞–π–¥–∏—Ç–µ –≤–∫–ª–∞–¥–∫—É **"Policies"** –∏–ª–∏ **"RLS"**
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ **Row Level Security (RLS)** **–í–´–ö–õ–Æ–ß–ï–ù** (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
   - –ï—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω, –Ω–∞–∂–º–∏—Ç–µ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å, —á—Ç–æ–±—ã –≤—ã–∫–ª—é—á–∏—Ç—å

**‚ö†Ô∏è –í–ê–ñ–ù–û:** –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ RLS –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ, –Ω–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –≤—ã–∫–ª—é—á–µ–Ω–Ω—ã–º.

---

## ‚úÖ –®–ê–ì 3: –ü–æ–ª—É—á–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Å—Ç—Ä–æ–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

### 3.1. –ù–∞–π–¥–∏—Ç–µ Connection Pooling

1. –í Supabase Dashboard –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Settings** ‚Üí **Database**
2. –ü—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ –≤–Ω–∏–∑ –¥–æ —Ä–∞–∑–¥–µ–ª–∞ **Connection string**
3. –ù–∞–π–¥–∏—Ç–µ –≤–∫–ª–∞–¥–∫—É **Connection pooling**
4. –í—ã–±–µ—Ä–∏—Ç–µ **Transaction mode** (–ø–æ—Ä—Ç 6543)
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å—Ç—Ä–æ–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Ü–µ–ª–∏–∫–æ–º

–û–Ω–∞ –¥–æ–ª–∂–Ω–∞ –≤—ã–≥–ª—è–¥–µ—Ç—å –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫:
```
postgresql://postgres.dxfnguweggcefslzgvzs:[YOUR-PASSWORD]@aws-0-eu-central-1.pooler.supabase.com:6543/postgres
```

### 3.2. –ó–∞–º–µ–Ω–∏—Ç–µ [YOUR-PASSWORD] –Ω–∞ –≤–∞—à –ø–∞—Ä–æ–ª—å

–í–∞—à –ø–∞—Ä–æ–ª—å: `tQ/5ShuHtg7FbgT`

–ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç—Ä–æ–∫–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å:
```
postgresql://postgres.dxfnguweggcefslzgvzs:tQ/5ShuHtg7FbgT@aws-0-eu-central-1.pooler.supabase.com:6543/postgres
```

**‚ö†Ô∏è –í–ê–ñ–ù–û:** 
- –•–æ—Å—Ç–Ω–µ–π–º –º–æ–∂–µ—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è –æ—Ç `aws-0-eu-central-1.pooler.supabase.com`
- –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –¢–û–ß–ù–£–Æ —Å—Ç—Ä–æ–∫—É –∏–∑ Supabase Dashboard
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Connection Pooling, –∞ –Ω–µ Direct connection

### 3.3. –û–±–Ω–æ–≤–∏—Ç–µ —Ñ–∞–π–ª .env

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
2. –ó–∞–º–µ–Ω–∏—Ç–µ —Å—Ç—Ä–æ–∫—É `DATABASE_URL` –Ω–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω—É—é –∏–∑ Supabase
3. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ñ–∞–π–ª

---

## ‚úÖ –®–ê–ì 4: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞

1. –í Supabase Dashboard –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Settings** ‚Üí **General**
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
   - **Reference ID:** –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `dxfnguweggcefslzgvzs`
   - **Region:** –∑–∞–ø–æ–º–Ω–∏—Ç–µ —Ä–µ–≥–∏–æ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, `eu-central-1`)

---

## ‚úÖ –®–ê–ì 5: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä

1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ç–µ–∫—É—â–∏–π —Å–µ—Ä–≤–µ—Ä (–µ—Å–ª–∏ –∑–∞–ø—É—â–µ–Ω)
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∑–∞–Ω–æ–≤–æ:
   ```powershell
   cd c:\Users\UserVik\Desktop\code\svadba\admin
   python server.py
   ```

---

## ‚úÖ –®–ê–ì 6: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–∞–π—Ç: `http://localhost:8000/wedding_files/tloader.html`
2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–¥–º–∏–Ω–∫—É: `http://localhost:8000/admin/dashboard.html`
4. –î–∞–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ

---

## üîç –ï—Å–ª–∏ –≤—Å–µ –µ—â–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞

–í –∫–æ–Ω—Å–æ–ª–∏ —Å–µ—Ä–≤–µ—Ä–∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è:
- `‚úÖ Database connection established!` - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ
- `‚úÖ Table 'responses' created or already exists` - —Ç–∞–±–ª–∏—Ü–∞ —Å–æ–∑–¥–∞–Ω–∞

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–∞–±–ª–∏—Ü—É –≤ Supabase

1. –í Supabase Dashboard ‚Üí **Table Editor**
2. –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∞–±–ª–∏—Ü—É `responses`
3. –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –∫–æ–ª–æ–Ω–∫–∏: `id`, `name`, `companion`, `attendance`, `bus_option`, `drinks`, `created_at`

### –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã Connection Pooling

–ï—Å–ª–∏ Transaction mode –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ **Session mode** (–ø–æ—Ä—Ç 5432):

```
postgresql://postgres.dxfnguweggcefslzgvzs:tQ/5ShuHtg7FbgT@aws-0-eu-central-1.pooler.supabase.com:5432/postgres
```

–ò–ª–∏ —Ñ–æ—Ä–º–∞—Ç –¥–ª—è —Å—Ç–∞—Ä–æ–≥–æ PgBouncer (–±–µ–∑ —Ç–æ—á–∫–∏ –≤ –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è):

```
postgresql://postgres:tQ/5ShuHtg7FbgT@aws-0-eu-central-1.pooler.supabase.com:6543/postgres
```

---

## üìû –ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å?

–ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç:
1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ—á–Ω—É—é —Å—Ç—Ä–æ–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏–∑ Supabase Dashboard
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ç–∞–±–ª–∏—Ü–∞ `responses` —Å–æ–∑–¥–∞–Ω–∞ –≤ Table Editor
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫
